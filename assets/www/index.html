<html>
<head>
<meta name="viewport" content="target-densitydpi=high-dpi, user-scalable=no">

<!-- THEME UTILITY -->
<link rel="stylesheet" href="libs/wink/themes/utils/loader.css" type="text/css">
<!-- END THEME UTILITY -->

<!-- THEME UTILITY -->
<script type="text/javascript" src="libs/wink/themes/utils/loader.js"></script>
<!-- END THEME UTILITY -->

<script type="text/javascript" src="libs/wink/wink.min.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="config/config.js"></script>

<script type="text/javascript" src="jquery-json.js"></script>
<script type="text/javascript" src="jquery.mousehold.js"></script>
<script type="text/javascript" src="phonegap.js"></script>

<script type="text/javascript" src="libs/wink/math/geometric/js/geometric.js"></script>
<script type="text/javascript" src="libs/wink/math/matrix/js/matrix.js"></script>
<script type="text/javascript" src="libs/wink/fx/xyz/js/3dfx.js"></script>
<script type="text/javascript" src="libs/wink/ux/movementtracker/js/movementtracker.js"></script>
<script type="text/javascript" src="libs/wink/ui/xyz/tagcloud/js/tagcloud.js"></script>
<script type="text/javascript" src="libs/wink/ui/layout/fixedlayout/js/fixedlayout.js"></script>

<script type="text/javascript" src="serverView.js"></script>


<!-- scroller -->
<script type="text/javascript" src="libs/wink/ux/window/js/window.js"></script>
<script type="text/javascript" src="libs/wink/ux/movementtracker/js/movementtracker.js"></script>
<script type="text/javascript" src="libs/wink/ux/inertia/js/inertia.js"></script>
<script type="text/javascript" src="libs/wink/ui/layout/scroller/js/scroller.js"></script>
<!-- scroller -->


<link rel="stylesheet" href="libs/wink/themes/wink.css" type="text/css" >
<link rel="stylesheet" href="libs/wink/ui/layout/fixedlayout/css/fixedlayout.css" type="text/css" >
<link rel="stylesheet" href="libs/wink/themes/default/css/wink.default.css" type="text/css" >
<link rel="stylesheet" href="main.css" type="text/css" >
<script type="text/javascript">
console.log("I am wink");
            var handleTagSelection = function(param)
            {
                switch( param ) {
                    case "homeButton1":
                        homeClickEvent();
                        break;
                    case "refreshButton1":
                        refreshClickEvent();
                        break;
                    case "settingsButton1":
                        settingClickEvent();
                        break;
                    case "quitButton1":
                        quitClickEvent();
                        break;
                }
                //alert("You clicked on : " + $(param.tag.id).innerHTML);
            };
        
        
            var init = function() {
                window.scrollTo(0,0);
        jQuery("div#footer div.w_menu_item").click(function(ev){
            console.log(ev.currentTarget.id );
            handleTagSelection(ev.currentTarget.id);
        });
                wink.error.logLevel = 1;

                var tags = [
                    { id: "homeButton",   rating: 0 },
                    { id: "refreshButton",   rating: 0 },
                    { id: "settingButton",   rating: 0 },
                    { id: "quitButton",   rating: 0 }
                ];

                var properties = {
                    tags: tags,
                    size: 80,                                      // radius size in pixel
                    textColor: { r: 0, g: 0, b: 0 },                // optional
                    selectedTextColor: { r: 181, g: 26, b: 26 },    // optional
                    scaleFactors : {                                // optional
                        ratioDepth: 1.5, 
                        ratioRating: 0
                    },
                    canMove: true,                                  // optional
                    canSelect: true,                                // optional
                    axis: "y",                                      // optional
                    shiftX: 0,                                      // optional
                    shiftY: -50,                                    // optional
                    asCircle: {                                     // optional
                        tilt: 0.1
                    }
                };
                console.log(wink.fx.initComposedTransform);
                var tagcloud = new wink.ui.xyz.TagCloud(properties);
                $("button-container").appendChild(tagcloud.getDomNode());
                
                wink.subscribe('/tagcloud/events/selection', { context: window, method: 'handleTagSelection' });
                
                setTimeout(function()
                {
                   /* var fl = new wink.ui.layout.FixedLayout({
                        target: 'view-container',
                        header: 'header',
                        //footer: 'footer',
                        moveDuration: 400,
                        displayDuration: 500,
                        preventTouchBar: true,
                        activated: true,
                        showHideOnClick: true,
                        nativeFixed: true,
                        scrollAtStart: wink.ua.isAndroid
                    });*/
                }, 100);
                
                //scroll
                var scrollerHelper = 
                {
                        scroller: null,
                        notifyVerticalMouvement: function() 
                            {
                                if (this.scrollEnabled == false) 
                                {
                                    this.scrollEnabled = true;
                                    this.scroller.enable();
                                }
                            }
                };
                var mvtHandler = 
                    {
                        node: null,
                        _notify: false,
                        
                        init: function() {
                            this.node = $('view-container');
                            
                            wink.ux.touch.addListener(this.node, "start", { context: this, method: "_start" }, { captureFlow: true });
                            wink.ux.touch.addListener(this.node, "move", { context: this, method: "_move" }, { captureFlow: true });
                            wink.ux.touch.addListener(this.node, "end", { context: this, method: "_end" }, { captureFlow: true });
                        },
                        
                        _start: function(uxEvent) 
                        {
                            this._se = uxEvent;
                            this._notify = false;
                        },
                        
                        _move: function(uxEvent) 
                        {
                            if (this._notify == true) {
                                return;
                            }
                            var dx = Math.abs(this._se.x - uxEvent.x);
                            var dy = Math.abs(this._se.y - uxEvent.y);
        
                            if (dy > 1) {
                                if (dy > dx) {
                                    this._notify = true;
                                    scrollerHelper.notifyVerticalMouvement();
                                }
                            }
                        },
                        
                        _end: function() 
                        {
                            this._notify = true;
                        }
                    };
                //scrollerHelper.init();

                var headerHeight = 45;
                var footerHeight = 80;
                
                var heightRemains = wink.ux.window.height + footerHeight;
                setTimeout(function()
                {
                    console.log( $('view-container'), $('view-container').style);
                    //$('content').style.height = heightRemains + "px";
                    $('view-container').style.height = heightRemains + "px";
                     var properties = 
                        {
                            target: "scrollContent",
                            direction: "y",
                            
                            scrollbars: 
                            {
                                backgroundColor: 'rgba(15, 15, 15, 0.5)',
                                borderColor: 'rgba(255, 255, 255, 0.7)'
                            }
                        };
                        
                        scrollerHelper.scroller = new wink.ui.layout.Scroller(properties);
                        mvtHandler.init();
                },500);
                
            };
            
            
            
            
            
            
        </script>

</head>
<body onload="init();">
<div id="header" class="w_box w_header w_bg_dark" style="width:100%;padding:0;height:125px;">
        <div style="float:left;padding-left:10px">Server</div>
        <div style="float:right;"><input id="menuButton" type="button" value="Menu" class="w_button w_radius w_bg_light w_right"/></div>
        <div style="clear:both;"></div>
        <div id="footer" class="w_box w_footer w_bg_dark" style="height:80px;width:100%;">
            <div class="w_layout_box">
                <div id="homeButton1" class="w_menu_item">
                    <img src="images/icon-home-active.png"/>
                </div>
                <div id="refreshButton1" class="w_menu_item">
                    <img src="images/icon-refresh-active.png"/>
                </div>
                <div id="settingsButton1" class="w_menu_item">
                    <img src="images/icon-settings-active.png"/>
                </div>
                <div id="quitButton1" class="w_menu_item">
                    <img src="images/icon-quit-active.png"/>
                </div>
            </div>
        </div>
</div>

<div id="content" style="overflow:hidden; ">
 
    <div id="view-container" style="overflow:hidden; ">
        <div id="scrollContent" style="position:relative;overflow:hidden;">
            <div id="main"  style="overflow:hidden; "></div>
            <div id="details"></div>
        </div>
    </div>
</div>
  <div id="top-container">
        <div style="position:absolute; width:100%;background-color:#000000;z-index:999px">
            <div id="button-container" style="height:200px;width: 235px;margin: auto;position:relative; display:none;"></div>
        </div>
        
    </div>
<div id="settings" style="display:none;">
    <div id="container" style="clear:both;">
        <div id="title">Servers</div>
        <div id="description">Please choose which server you want to view</div>
        <div id="server-list">
        </div>
    </div>
</div>

<div id="buttonbar" style="display:none;"> 
    <div id="homeButton" class="btn">
        <img src="images/icon-home-active.png"/>
        <div>Home</div>
    </div>
    <div id="refreshButton" class="btn">
        <img src="images/icon-refresh-active.png"/>
        <div>Refresh</div>
    </div>
    <div id="settingButton" class="btn">
        <img src="images/icon-settings-active.png"/>
        <div>Settings</div>
    </div>
    <div id="quitButton" class="btn">
        <img src="images/icon-quit-active.png"/>
        <div>Quit</div>
    </div>
</div>
<div id="popup" style="display:none;">
    <div class="popup-title">New Server</div>
    <input type="hidden" id="popup-id" class="input-box" value="" />
    <input type="text" id="popup-name" class="input-box" value="Name" />
    <input type="text" id="popup-url" class="input-box" value="URL" />
    <div class="popup-button">
        <input class="button" type="button" value="Save" id="popup-save" />
        <input class="button" type="button" value="Cancel" id="popup-cancel" />
    </div>
</div>
</body>
</html>

